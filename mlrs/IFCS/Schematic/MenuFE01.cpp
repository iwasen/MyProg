//*****************************************************************************************************
//  1. ファイル名
//		MenuFE01.cpp
//----------------------------------------------------------------------------------------------------
//  2. 機能
//		ＬＰ／Ｃ固定装置画面の操作メニュー処理
//----------------------------------------------------------------------------------------------------
//  3. 備考
//*****************************************************************************************************

#include "stdafx.h"
#include "Schematic.h"
#include "MenuFE01.h"

// CMenuFE01 ダイアログ

IMPLEMENT_DYNCREATE(CMenuFE01, CMenuCommon)

//*****************************************************************************************************
//  1. 関数名
//		CMenuFE01::CMenuFE01
//----------------------------------------------------------------------------------------------------
//  2. 機能
//		コンストラクタ
//----------------------------------------------------------------------------------------------------
//  3. パラメータ
//		CWnd*	pParent		[I] 親ウィンドウ
//----------------------------------------------------------------------------------------------------
//  4. 戻り値
//		無し
//*****************************************************************************************************
CMenuFE01::CMenuFE01(CWnd* pParent /*=NULL*/)
	: CMenuCommon(CMenuFE01::IDD, pParent)
{
}

void CMenuFE01::DoDataExchange(CDataExchange* pDX)
{
	CMenuCommon::DoDataExchange(pDX);
	DDX_Control(pDX, IDC_BUTTON_ACTION_1, m_cButtonAction1);
	DDX_Control(pDX, IDC_BUTTON_ACTION_2, m_cButtonAction2);
}


BEGIN_MESSAGE_MAP(CMenuFE01, CMenuCommon)
	ON_BN_CLICKED(IDC_BUTTON_ACTION_1, &CMenuFE01::OnBnClickedButtonAction1)
	ON_BN_CLICKED(IDC_BUTTON_ACTION_2, &CMenuFE01::OnBnClickedButtonAction2)
END_MESSAGE_MAP()


// CMenuFE01 メッセージ ハンドラ

//*****************************************************************************************************
//  1. 関数名
//		CMenuFE01::OnInitDialog
//----------------------------------------------------------------------------------------------------
//  2. 機能
//		ダイアログ初期化処理
//----------------------------------------------------------------------------------------------------
//  3. パラメータ
//		無し
//----------------------------------------------------------------------------------------------------
//  4. 戻り値
//		BOOL	TRUE
//*****************************************************************************************************
BOOL CMenuFE01::OnInitDialog()
{
	CMenuCommon::OnInitDialog();

	// 動作ステータス設定
	SetStatus(STATUS_LPC_FIX);

	return FALSE;
}

//*****************************************************************************************************
//  1. 関数名
//		CMenuFE01::OnBnClickedButtonAction1
//----------------------------------------------------------------------------------------------------
//  2. 機能
//		「ＬＰ／Ｃ解放」ボタンクリック処理
//----------------------------------------------------------------------------------------------------
//  3. パラメータ
//		無し
//----------------------------------------------------------------------------------------------------
//  4. 戻り値
//		無し
//*****************************************************************************************************
void CMenuFE01::OnBnClickedButtonAction1()
{
	// 動作ステータス設定
	SetStatus(STATUS_LPC_WORKING);

	// Flashへ操作指示送信
	SendAction(ACTION_1);
}

//*****************************************************************************************************
//  1. 関数名
//		CMenuFE01::OnBnClickedButtonAction2
//----------------------------------------------------------------------------------------------------
//  2. 機能
//		「ＬＰ／Ｃ固定」ボタンクリック処理
//----------------------------------------------------------------------------------------------------
//  3. パラメータ
//		無し
//----------------------------------------------------------------------------------------------------
//  4. 戻り値
//		無し
//*****************************************************************************************************
void CMenuFE01::OnBnClickedButtonAction2()
{
	// 動作ステータス設定
	SetStatus(STATUS_LPC_WORKING);

	// Flashへ操作指示送信
	SendAction(ACTION_2);
}

//*****************************************************************************************************
//  1. 関数名
//		CMenuFE01::ActionEnd
//----------------------------------------------------------------------------------------------------
//  2. 機能
//		Flashからの動作終了通知受信処理
//----------------------------------------------------------------------------------------------------
//  3. パラメータ
//		int		nActionNo		[I] アクション番号
//----------------------------------------------------------------------------------------------------
//  4. 戻り値
//		無し
//*****************************************************************************************************
void CMenuFE01::ActionEnd(int nActionNo)
{
	switch (nActionNo) {
	case ACTION_1:
		SetStatus(STATUS_LPC_REL);
		break;
	case ACTION_2:
		SetStatus(STATUS_LPC_FIX);
		break;
	}
}

//*****************************************************************************************************
//  1. 関数名
//		CMenuFE01::SetStatus
//----------------------------------------------------------------------------------------------------
//  2. 機能
//		動作ステータス設定処理
//----------------------------------------------------------------------------------------------------
//  3. パラメータ
//		EStatus		eStatus		[I] 設定ステータス
//----------------------------------------------------------------------------------------------------
//  4. 戻り値
//		無し
//*****************************************************************************************************
void CMenuFE01::SetStatus(EStatus eStatus)
{
	// 動作ステータス設定
	m_eStatus = eStatus;

	// メニューボタン設定
	SetMenuButton();
}

//*****************************************************************************************************
//  1. 関数名
//		CMenuFE01::SetMenuButton
//----------------------------------------------------------------------------------------------------
//  2. 機能
//		メニューボタン設定処理
//----------------------------------------------------------------------------------------------------
//  3. パラメータ
//		無し
//----------------------------------------------------------------------------------------------------
//  4. 戻り値
//		無し
//*****************************************************************************************************
void CMenuFE01::SetMenuButton()
{
	m_cButtonAction1.SetEnable(m_eStatus == STATUS_LPC_FIX);
	m_cButtonAction2.SetEnable(m_eStatus == STATUS_LPC_REL);
}
